{
  "query": "\nCREATE TABLE `connected_accounts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`platformUserId` varchar(128),\n\t`platformUsername` varchar(128),\n\t`platformDisplayName` text,\n\t`platformAvatarUrl` text,\n\t`accessToken` text,\n\t`refreshToken` text,\n\t`tokenExpiresAt` timestamp,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `connected_accounts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `notification_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`payload` json,\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `notification_logs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `post_metrics` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`postPlatformId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`impressions` bigint DEFAULT 0,\n\t`reach` bigint DEFAULT 0,\n\t`likes` bigint DEFAULT 0,\n\t`comments` bigint DEFAULT 0,\n\t`shares` bigint DEFAULT 0,\n\t`clicks` bigint DEFAULT 0,\n\t`saves` bigint DEFAULT 0,\n\t`estimatedRevenue` text DEFAULT '0.00',\n\t`fetchedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_metrics_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `post_platforms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`status` enum('pending','publishing','published','failed') NOT NULL DEFAULT 'pending',\n\t`platformPostId` varchar(256),\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_platforms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `posts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`caption` text,\n\t`contentType` enum('image','video','carousel','text','reel','story') NOT NULL,\n\t`mediaUrls` json DEFAULT ('[]'),\n\t`mediaKeys` json DEFAULT ('[]'),\n\t`status` enum('draft','scheduled','publishing','published','failed','cancelled') NOT NULL DEFAULT 'draft',\n\t`scheduledAt` timestamp,\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `posts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `subscription_plans` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(64) NOT NULL,\n\t`tier` enum('trial','pro','ultra_pro') NOT NULL,\n\t`stripePriceId` varchar(128),\n\t`monthlyPrice` text NOT NULL DEFAULT '0.00',\n\t`yearlyPrice` text NOT NULL DEFAULT '0.00',\n\t`dailyPostLimit` int,\n\t`platformLimit` int,\n\t`features` json DEFAULT ('[]'),\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `subscription_plans_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `subscription_plans_tier_unique` UNIQUE(`tier`)\n);\n\nALTER TABLE `users` ADD `avatarUrl` text;\nALTER TABLE `users` ADD `subscriptionTier` enum('trial','pro','ultra_pro') DEFAULT 'trial' NOT NULL;\nALTER TABLE `users` ADD `stripeCustomerId` varchar(128);\nALTER TABLE `users` ADD `stripeSubscriptionId` varchar(128);\nALTER TABLE `users` ADD `subscriptionStatus` varchar(32) DEFAULT 'active';\nALTER TABLE `users` ADD `subscriptionExpiresAt` timestamp;\nALTER TABLE `users` ADD `proPostLimit` int DEFAULT 50;\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 28JH5c42DQM8Bi5.885b4980f470 --database etBamX5qzE4yrWGG5yA7MM --execute \nCREATE TABLE `connected_accounts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`platformUserId` varchar(128),\n\t`platformUsername` varchar(128),\n\t`platformDisplayName` text,\n\t`platformAvatarUrl` text,\n\t`accessToken` text,\n\t`refreshToken` text,\n\t`tokenExpiresAt` timestamp,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `connected_accounts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `notification_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`payload` json,\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `notification_logs_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `post_metrics` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`postPlatformId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`impressions` bigint DEFAULT 0,\n\t`reach` bigint DEFAULT 0,\n\t`likes` bigint DEFAULT 0,\n\t`comments` bigint DEFAULT 0,\n\t`shares` bigint DEFAULT 0,\n\t`clicks` bigint DEFAULT 0,\n\t`saves` bigint DEFAULT 0,\n\t`estimatedRevenue` text DEFAULT '0.00',\n\t`fetchedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_metrics_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `post_platforms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`status` enum('pending','publishing','published','failed') NOT NULL DEFAULT 'pending',\n\t`platformPostId` varchar(256),\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_platforms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `posts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`caption` text,\n\t`contentType` enum('image','video','carousel','text','reel','story') NOT NULL,\n\t`mediaUrls` json DEFAULT ('[]'),\n\t`mediaKeys` json DEFAULT ('[]'),\n\t`status` enum('draft','scheduled','publishing','published','failed','cancelled') NOT NULL DEFAULT 'draft',\n\t`scheduledAt` timestamp,\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `posts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `subscription_plans` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(64) NOT NULL,\n\t`tier` enum('trial','pro','ultra_pro') NOT NULL,\n\t`stripePriceId` varchar(128),\n\t`monthlyPrice` text NOT NULL DEFAULT '0.00',\n\t`yearlyPrice` text NOT NULL DEFAULT '0.00',\n\t`dailyPostLimit` int,\n\t`platformLimit` int,\n\t`features` json DEFAULT ('[]'),\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `subscription_plans_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `subscription_plans_tier_unique` UNIQUE(`tier`)\n);\n\nALTER TABLE `users` ADD `avatarUrl` text;\nALTER TABLE `users` ADD `subscriptionTier` enum('trial','pro','ultra_pro') DEFAULT 'trial' NOT NULL;\nALTER TABLE `users` ADD `stripeCustomerId` varchar(128);\nALTER TABLE `users` ADD `stripeSubscriptionId` varchar(128);\nALTER TABLE `users` ADD `subscriptionStatus` varchar(32) DEFAULT 'active';\nALTER TABLE `users` ADD `subscriptionExpiresAt` timestamp;\nALTER TABLE `users` ADD `proPostLimit` int DEFAULT 50;\n",
  "returncode": 1,
  "logs": [
    "ERROR 1101 (42000) at line 27: BLOB/TEXT/JSON column 'estimatedRevenue' can't have a default value"
  ]
}