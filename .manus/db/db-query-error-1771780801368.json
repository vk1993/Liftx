{
  "query": "\nCREATE TABLE IF NOT EXISTS `post_metrics` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`postPlatformId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`impressions` bigint DEFAULT 0,\n\t`reach` bigint DEFAULT 0,\n\t`likes` bigint DEFAULT 0,\n\t`comments` bigint DEFAULT 0,\n\t`shares` bigint DEFAULT 0,\n\t`clicks` bigint DEFAULT 0,\n\t`saves` bigint DEFAULT 0,\n\t`estimatedRevenue` varchar(32) DEFAULT '0.00',\n\t`fetchedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_metrics_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `post_platforms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`status` enum('pending','publishing','published','failed') NOT NULL DEFAULT 'pending',\n\t`platformPostId` varchar(256),\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_platforms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `posts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`caption` text,\n\t`contentType` enum('image','video','carousel','text','reel','story') NOT NULL,\n\t`mediaUrls` json DEFAULT ('[]'),\n\t`mediaKeys` json DEFAULT ('[]'),\n\t`status` enum('draft','scheduled','publishing','published','failed','cancelled') NOT NULL DEFAULT 'draft',\n\t`scheduledAt` timestamp,\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `posts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscription_plans` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(64) NOT NULL,\n\t`tier` enum('trial','pro','ultra_pro') NOT NULL,\n\t`stripePriceId` varchar(128),\n\t`monthlyPrice` varchar(32) NOT NULL DEFAULT '0.00',\n\t`yearlyPrice` varchar(32) NOT NULL DEFAULT '0.00',\n\t`dailyPostLimit` int,\n\t`platformLimit` int,\n\t`features` json DEFAULT ('[]'),\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `subscription_plans_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `subscription_plans_tier_unique` UNIQUE(`tier`)\n);\n\nCREATE TABLE IF NOT EXISTS `notification_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`payload` json,\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `notification_logs_id` PRIMARY KEY(`id`)\n);\n\nINSERT IGNORE INTO `subscription_plans` (`name`, `tier`, `monthlyPrice`, `yearlyPrice`, `dailyPostLimit`, `platformLimit`, `features`) VALUES\n('Trial', 'trial', '0.00', '0.00', 2, 2, '[\"Images only\",\"2 posts per day\",\"Up to 2 platforms\",\"Basic analytics\"]'),\n('Pro', 'pro', '19.99', '199.99', 50, 5, '[\"All content types\",\"50 posts per day\",\"Up to 5 platforms\",\"Scheduling\",\"Advanced analytics\"]'),\n('Ultra Pro', 'ultra_pro', '49.99', '499.99', NULL, NULL, '[\"All content types\",\"Unlimited posts\",\"All platforms\",\"Advanced scheduling\",\"Real-time metrics\",\"Revenue analytics\",\"Priority support\"]');\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 28JH5c42DQM8Bi5.885b4980f470 --database etBamX5qzE4yrWGG5yA7MM --execute \nCREATE TABLE IF NOT EXISTS `post_metrics` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`postPlatformId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`impressions` bigint DEFAULT 0,\n\t`reach` bigint DEFAULT 0,\n\t`likes` bigint DEFAULT 0,\n\t`comments` bigint DEFAULT 0,\n\t`shares` bigint DEFAULT 0,\n\t`clicks` bigint DEFAULT 0,\n\t`saves` bigint DEFAULT 0,\n\t`estimatedRevenue` varchar(32) DEFAULT '0.00',\n\t`fetchedAt` timestamp NOT NULL DEFAULT (now()),\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_metrics_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `post_platforms` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`postId` int NOT NULL,\n\t`platform` enum('linkedin','instagram','x','facebook','tiktok') NOT NULL,\n\t`status` enum('pending','publishing','published','failed') NOT NULL DEFAULT 'pending',\n\t`platformPostId` varchar(256),\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `post_platforms_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `posts` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`caption` text,\n\t`contentType` enum('image','video','carousel','text','reel','story') NOT NULL,\n\t`mediaUrls` json DEFAULT ('[]'),\n\t`mediaKeys` json DEFAULT ('[]'),\n\t`status` enum('draft','scheduled','publishing','published','failed','cancelled') NOT NULL DEFAULT 'draft',\n\t`scheduledAt` timestamp,\n\t`publishedAt` timestamp,\n\t`failureReason` text,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `posts_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscription_plans` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`name` varchar(64) NOT NULL,\n\t`tier` enum('trial','pro','ultra_pro') NOT NULL,\n\t`stripePriceId` varchar(128),\n\t`monthlyPrice` varchar(32) NOT NULL DEFAULT '0.00',\n\t`yearlyPrice` varchar(32) NOT NULL DEFAULT '0.00',\n\t`dailyPostLimit` int,\n\t`platformLimit` int,\n\t`features` json DEFAULT ('[]'),\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `subscription_plans_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `subscription_plans_tier_unique` UNIQUE(`tier`)\n);\n\nCREATE TABLE IF NOT EXISTS `notification_logs` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`type` varchar(64) NOT NULL,\n\t`payload` json,\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `notification_logs_id` PRIMARY KEY(`id`)\n);\n\nINSERT IGNORE INTO `subscription_plans` (`name`, `tier`, `monthlyPrice`, `yearlyPrice`, `dailyPostLimit`, `platformLimit`, `features`) VALUES\n('Trial', 'trial', '0.00', '0.00', 2, 2, '[\"Images only\",\"2 posts per day\",\"Up to 2 platforms\",\"Basic analytics\"]'),\n('Pro', 'pro', '19.99', '199.99', 50, 5, '[\"All content types\",\"50 posts per day\",\"Up to 5 platforms\",\"Scheduling\",\"Advanced analytics\"]'),\n('Ultra Pro', 'ultra_pro', '49.99', '499.99', NULL, NULL, '[\"All content types\",\"Unlimited posts\",\"All platforms\",\"Advanced scheduling\",\"Real-time metrics\",\"Revenue analytics\",\"Priority support\"]');\n",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 32: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 6 column 32 near \"'[]'),",
    "\t`mediaKeys` json DEFAULT ('[]'),",
    "\t`status` enum('draft','scheduled','publishing','published','failed','cancelled') NOT NULL DEFAULT 'draft',",
    "\t`scheduledAt` timestamp,",
    "\t`publishedAt` timestamp,",
    "\t`failureReason` text,",
    "\t`createdAt` timestamp NOT NULL DEFAULT (now()),",
    "\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,",
    "\tCONSTRAINT `post"
  ]
}